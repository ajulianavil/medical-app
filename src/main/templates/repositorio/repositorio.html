{% extends 'main/layout.html' %}
{% load static %}
{% block head %}
<link rel="stylesheet" type="text/css" href="{% static 'css/repositorio.css' %}" />
    <script src="{% static 'js/reporte_script.js' %}"></script>
    <script src="{% static 'js/validations.js' %}"></script>

{% endblock %}

{% block content %}
<br />
<br />
<h1 style="font-weight: bold; color: #0796D8">Repositorio</h1>
<p style="font-weight: bold;">Por favor, ingrese sus datos de interés para filtrar la búsqueda.</p>

<div class="box container " style="height: 100%; margin-bottom:20px">
  <form class="report-form" method="POST">
    {% csrf_token %}
    <div class="row">
      {% comment %} <div class="col-md-auto">
        <strong class="col-md-auto label"> Cédula paciente </strong>
        <input type="text" id="patced_input" name="patced_input" class="form-repo">
      </div>
      <div class="col-md-auto">
        <strong class="col-md-auto label"> Apellido paciente </strong>
        <input type="text" id="lastname_input" name="lastname_input" class="form-repo">
      </div> {% endcomment %}
      <div class="col-md-auto">
        <strong class="col-md-auto label"> Rango de edad gestacional (semanas)</strong>
        {% comment %} <input type="number" max="41" id="ga_input" name="ga_input" class="form-repo" placeholder="Desde"> {% endcomment %}
        <select id="ga_input" name="ga_input">
          <option value="15">Semana 15</option>
          <option value="16">Semana 16</option>
          <option value="17">Semana 17</option>
          <option value="18">Semana 18</option>
          <option value="19">Semana 19</option>
          <option value="20">Semana 20</option>
          <option value="21">Semana 21</option>
          <option value="22">Semana 22</option>
          <option value="23">Semana 23</option>
          <option value="24">Semana 24</option>
          <option value="25">Semana 25</option>
          <option value="26">Semana 26</option>
          <option value="27">Semana 27</option>
          <option value="28">Semana 28</option>
          <option value="29">Semana 29</option>
          <option value="30">Semana 30</option>
          <option value="31">Semana 31</option>
          <option value="32">Semana 32</option>
          <option value="33">Semana 33</option>
          <option value="34">Semana 34</option>
          <option value="35">Semana 35</option>
          <option value="36">Semana 36</option>
          <option value="37">Semana 37</option>
          <option value="38">Semana 38</option>
          <option value="39">Semana 39</option>
          <option value="40">Semana 40</option>
        </select>
        {% comment %} <label class="labels" for="{{ form.subject.id_for_label }}">{{ form.ga.label }}</label> {% endcomment %}
      </div>
      <div class="col-md-auto">
      </br>
      {% comment %} <input type="number" max="41" id="ga_input" name="ga_input" class="form-repo" placeholder="Hasta"> {% endcomment %}
      <select id="ga_input_final" name="ga_input_final">
        <option value="15">Semana 15</option>
        <option value="16">Semana 16</option>
        <option value="17">Semana 17</option>
        <option value="18">Semana 18</option>
        <option value="19">Semana 19</option>
        <option value="20">Semana 20</option>
        <option value="21">Semana 21</option>
        <option value="22">Semana 22</option>
        <option value="23">Semana 23</option>
        <option value="24">Semana 24</option>
        <option value="25">Semana 25</option>
        <option value="26">Semana 26</option>
        <option value="27">Semana 27</option>
        <option value="28">Semana 28</option>
        <option value="29">Semana 29</option>
        <option value="30">Semana 30</option>
        <option value="31">Semana 31</option>
        <option value="32">Semana 32</option>
        <option value="33">Semana 33</option>
        <option value="34">Semana 34</option>
        <option value="35">Semana 35</option>
        <option value="36">Semana 36</option>
        <option value="37">Semana 37</option>
        <option value="38">Semana 38</option>
        <option value="39">Semana 39</option>
        <option value="40">Semana 40</option>
      </select>
      </div>
      <div class="col-md-auto">
        <strong class="col-md-auto label"> Condición del feto </strong>
        <select id="state_input" name="state_input">
          <option value="sano">Sano</option>
          <option value="anormal">Anormal</option>
        </select>
        {% comment %} <input type="text"  id="state_input" name="state_input"  class="form-repo"> {% endcomment %}
      </div>
    </div>
    <br />
    <div class="row">
      <div class="col-md-auto">
        <strong class="col-md-auto label" > Medición </strong>
        <select  id="med_input" name="med_input" onchange="updateDiagnosisOptions()">
          <option value="todas">Todas</option>
          <option value="hc_hadlock">HC_HADLOCK</option>
          <option value="bpd_hadlock">BPD_HADLOCK</option>
          <option value="csp">CSP</option>
          <option value="cm">CM</option>
          <option value="vp">VP</option>
          <option value="va">VA</option>
          <option value="cereb_hill">CEREB_HILL</option>
          <option value="afi">AFI</option>
          <option value="efw">EFW</option>
        </select>
      </div>
      <div class="col-md-auto">
        <strong class="col-md-auto label"> Diagnóstico </strong>
        {% comment %} <input type="text" id="diagnosis_input" name="diagnosis_input" value="{{paciente.cedulapac}}" > {% endcomment %}
        <select id="diagnosis_input" name="diagnosis_input" onchange="updateMedOptions()">
          <option value="todos">Todos</option>
          <option value="normal">Normal</option>
          <option value="macrocrania">Macrocrania</option>
          <option value="microcrania">Microcrania</option>
          <option value="anormal-sup">Anormalidad por valor superior</option>
          <option value="anormal-inf">Anormalidad por valor inferior</option>
          <option value="hipoplasia">Hipoplasia cereberal</option>
          <option value="rciu">R.C.I.U</option>
          <option value="feto-grande">Feto grande</option>
          <option value="feto-pequeño">Feto pequeño</option>
          <option value="megacisterno">Megacisterno</option>
          <option value="ventri-leve">Ventriculomegalia leve</option>
          <option value="ventri-mod">Ventriculomegalia moderada</option>
          <option value="ventri-sev">Ventriculomegalia severa</option>
          <option value="oligohidramnios">Oligohidramnios</option>
          <option value="polihidramnios">Polihidramnios</option>
        </select>
      </div>
      <div class="col-md-auto">
        <strong class="col-md-auto label"> Fecha de toma de exámen</strong>
        <input type="date" id="start_date" name="start_date">

      </div>
      <div class="col-md-auto">
      </br>
        <input type="date" id="end_date" name="end_date">
      </div>
      <div class="col-md-auto">
        <button class="btn submit-button" style="width: 60px"> <i class="fa fa-search"></i></button>
      </div>
    </div>
  </form>
  </div>
  <br>
  {% if messages %}
    {% for message in messages %}
        <div class="alert alert-warning">
            {{ message }}
        </div> 
    {% endfor %}
  {% endif %}
  <br>
  <div class="container">
  <table>
    <thead>
      <tr>
        {% comment %} <th style="text-align: center;">Cédula</th>
        <th style="text-align: center;">Apellido</th> {% endcomment %}
        <th style="text-align: center;">GA</th>
        <th style="text-align: center;">Estado</th>
        <th style="text-align: center;">Fecha reporte</th>
        <th style="text-align: center;">HC_HADLOCK</th>
        <th style="text-align: center;">Valor</th>
        <th style="text-align: center;">P5 </th>
        <th style="text-align: center;">P95 </th>
        <th style="text-align: center;">BPD_HADLOCK </th>
        <th style="text-align: center;">Valor</th>
        <th style="text-align: center;">P5 </th>
        <th style="text-align: center;">P95 </th>
        <th style="text-align: center;">CSP </th>
        <th style="text-align: center;">Valor</th>
        <th style="text-align: center;">P5 </th>
        <th style="text-align: center;">P95 </th>
        <th style="text-align: center;">CM </th>
        <th style="text-align: center;">Valor</th>
        <th style="text-align: center;">Max </th>
        <th style="text-align: center;">VP </th>
        <th style="text-align: center;">Max </th>
        <th style="text-align: center;">VA </th>
        <th style="text-align: center;">Max </th>
        <th style="text-align: center;">CEREB_HILL </th>
        <th style="text-align: center;">Max </th>
        <th style="text-align: center;">AFI </th>
        <th style="text-align: center;">Min </th>
        <th style="text-align: center;">Max </th>
        <th style="text-align: center;">EFW </th>
        <th style="text-align: center;">Min </th>
        <th style="text-align: center;">Max </th>
      </tr>
    </thead>
    <tbody>
      {% for obj in objects %}
      <tr>
        <td style="text-align: center;">{{ obj.ga_reporte }}</td>
        <td style="text-align: center;">{{ obj.paciente.apellido_paterno }}</td>
        <td style="text-align: center;">{{ obj.report_date }}</td>
        <td style="text-align: center;">{{ obj.consulta.idpac_id }}</td>
        <td style="text-align: center;">{{ obj.consulta.medUltrasonido }}</td>
        <td style="text-align: center;">{{ obj.consulta.motivo_consulta }}</td>
        <td style="text-align: center;">
          <a href="/registros/consulta/{{ obj.consulta.consultaid }}">
            <i class="fa-regular fa-eye search"></i>
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>


{% endblock %}

